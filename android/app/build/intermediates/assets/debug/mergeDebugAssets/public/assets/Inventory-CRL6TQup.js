import{j as o,aa as ma,ab as ha,ac as ya,ad as qe}from"./ui-vendor-CRu_cuPE.js";import{r as _,u as xa}from"./react-vendor-DwZQO67Z.js";import{d as pa,as as V,a5 as F,a6 as pe,at as Z,a7 as Pe,au as ba,av as Oe,a9 as ga,aw as O,ax as T,ay as de,az as Y,aA as $,aB as _a,aC as be,aD as ja,aE as Na,aF as He,j as U,C as wa,aG as Ie,D as Da,e as Ca,f as ka,g as Ma,L as z,I as ce,B as W,aH as Sa,q as S,s as M,P as ze,aI as Pa,aJ as Oa,aK as Ia,aL as Ta,aM as ae,aN as Ue,w as Fa,aO as La,T as $e,o as te,ae as Wa,aP as Ea,ar as Aa,X as Ra}from"./index-D4bhw5kJ.js";import{A as Ba}from"./AppShell-DVt8-4f8.js";import{T as Ya,a as qa,b as K,c as Ha}from"./tabs-C9GQepe1.js";import{C as za}from"./checkbox-CEYRQozO.js";import{S as Te,a as Fe,b as Le,c as We,d as L}from"./select-BN0Wnciu.js";import{S as Ua}from"./switch-_hpo76TP.js";import{a as E,s as I}from"./startOfMonth-BX_IpS4n.js";import{e as ge}from"./endOfMonth-xVGECeUJ.js";import{d as X}from"./differenceInCalendarMonths-C0vMyT8W.js";import{a as ye}from"./addWeeks-CNP7ZrMa.js";import{e as _e}from"./endOfWeek-K737SY6W.js";import{C as $a}from"./chevron-left-DnN1sqg3.js";import{C as Va}from"./UniversalShell-B176IQVx.js";import{m as G,A as Ka}from"./animation-vendor-C-lCNj7M.js";import{S as Ga}from"./square-pen-UPLsKTmJ.js";import{u as Za}from"./useSwipeNavigation-FVKdXjvo.js";import{P as Xa}from"./PageTransition-DTafOOMG.js";import{A as Ja}from"./arrow-left-CQcT7sCo.js";import"./chart-vendor-BDCxrQ3h.js";import"./supabase-vendor-BS1x--yE.js";import"./scan-rfUsMt4r.js";import"./trending-down-D_vIl22O.js";import"./leaf-DXJ1a3o-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=pa("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function et(e,t,a){return E(e,t*12,a)}function at(e,t){let a,n=t==null?void 0:t.in;return e.forEach(r=>{!n&&typeof r=="object"&&(n=V.bind(null,r));const s=F(r,n);(!a||a<s||isNaN(+s))&&(a=s)}),V(n,a||NaN)}function tt(e,t){let a,n=t==null?void 0:t.in;return e.forEach(r=>{!n&&typeof r=="object"&&(n=V.bind(null,r));const s=F(r,n);(!a||a>s||isNaN(+s))&&(a=s)}),V(n,a||NaN)}function nt(e,t,a){const[n,r]=pe(a==null?void 0:a.in,e,t),s=Z(n,a),i=Z(r,a),l=+s-Pe(s),u=+i-Pe(i);return Math.round((l-u)/ba)}function Ve(e,t){return _e(e,{...t,weekStartsOn:1})}function rt(e,t){const a=F(e,t==null?void 0:t.in),n=a.getFullYear(),r=a.getMonth(),s=V(a,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function ot(e){return Math.trunc(+F(e)/1e3)}function st(e,t){const a=F(e,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(0,0,0,0),F(a,t==null?void 0:t.in)}function it(e,t){const a=F(e,t==null?void 0:t.in);return nt(st(a,t),I(a,t),t)+1}function xe(e,t){return+F(e)>+F(t)}function Ke(e,t){return+F(e)<+F(t)}function je(e,t,a){const[n,r]=pe(a==null?void 0:a.in,e,t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function lt(e,t,a){const[n,r]=pe(a==null?void 0:a.in,e,t);return n.getFullYear()===r.getFullYear()}function ue(e,t,a){const n=F(e,a==null?void 0:a.in),r=n.getFullYear(),s=n.getDate(),i=V(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const l=rt(i);return n.setMonth(t,Math.min(s,l)),n}function Ee(e,t,a){const n=F(e,a==null?void 0:a.in);return isNaN(+n)?V(e,NaN):(n.setFullYear(t),n)}var p=function(){return p=Object.assign||function(t){for(var a,n=1,r=arguments.length;n<r;n++){a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},p.apply(this,arguments)};function dt(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a}function Ge(e,t,a){for(var n=0,r=t.length,s;n<r;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function J(e){return e.mode==="multiple"}function Q(e){return e.mode==="range"}function oe(e){return e.mode==="single"}var ct={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ut(e,t){return $(e,"LLLL y",t)}function ft(e,t){return $(e,"d",t)}function vt(e,t){return $(e,"LLLL",t)}function mt(e){return"".concat(e)}function ht(e,t){return $(e,"cccccc",t)}function yt(e,t){return $(e,"yyyy",t)}var xt=Object.freeze({__proto__:null,formatCaption:ut,formatDay:ft,formatMonthCaption:vt,formatWeekNumber:mt,formatWeekdayName:ht,formatYearCaption:yt}),pt=function(e,t,a){return $(e,"do MMMM (EEEE)",a)},bt=function(){return"Month: "},gt=function(){return"Go to next month"},_t=function(){return"Go to previous month"},jt=function(e,t){return $(e,"cccc",t)},Nt=function(e){return"Week n. ".concat(e)},wt=function(){return"Year: "},Dt=Object.freeze({__proto__:null,labelDay:pt,labelMonthDropdown:bt,labelNext:gt,labelPrevious:_t,labelWeekNumber:Nt,labelWeekday:jt,labelYearDropdown:wt});function Ct(){var e="buttons",t=ct,a=ga,n={},r={},s=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:xt,labels:Dt,locale:a,modifiersClassNames:n,modifiers:r,numberOfMonths:s,styles:i,today:l,mode:"default"}}function kt(e){var t=e.fromYear,a=e.toYear,n=e.fromMonth,r=e.toMonth,s=e.fromDate,i=e.toDate;return n?s=I(n):t&&(s=new Date(t,0,1)),r?i=ge(r):a&&(i=new Date(a,11,31)),{fromDate:s?Oe(s):void 0,toDate:i?Oe(i):void 0}}var Ze=_.createContext(void 0);function Mt(e){var t,a=e.initialProps,n=Ct(),r=kt(a),s=r.fromDate,i=r.toDate,l=(t=a.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!s||!i)&&(l="buttons");var u;(oe(a)||J(a)||Q(a))&&(u=a.onSelect);var c=p(p(p({},n),a),{captionLayout:l,classNames:p(p({},n.classNames),a.classNames),components:p({},a.components),formatters:p(p({},n.formatters),a.formatters),fromDate:s,labels:p(p({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:p(p({},n.modifiers),a.modifiers),modifiersClassNames:p(p({},n.modifiersClassNames),a.modifiersClassNames),onSelect:u,styles:p(p({},n.styles),a.styles),toDate:i});return o.jsx(Ze.Provider,{value:c,children:e.children})}function D(){var e=_.useContext(Ze);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Xe(e){var t=D(),a=t.locale,n=t.classNames,r=t.styles,s=t.formatters.formatCaption;return o.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:a})})}function St(e){return o.jsx("svg",p({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:o.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Je(e){var t,a,n=e.onChange,r=e.value,s=e.children,i=e.caption,l=e.className,u=e.style,c=D(),d=(a=(t=c.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&a!==void 0?a:St;return o.jsxs("div",{className:l,style:u,children:[o.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),o.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:r,onChange:n,children:s}),o.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,o.jsx(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function Pt(e){var t,a=D(),n=a.fromDate,r=a.toDate,s=a.styles,i=a.locale,l=a.formatters.formatMonthCaption,u=a.classNames,c=a.components,d=a.labels.labelMonthDropdown;if(!n)return o.jsx(o.Fragment,{});if(!r)return o.jsx(o.Fragment,{});var f=[];if(lt(n,r))for(var m=I(n),h=n.getMonth();h<=r.getMonth();h++)f.push(ue(m,h));else for(var m=I(new Date),h=0;h<=11;h++)f.push(ue(m,h));var x=function(b){var C=Number(b.target.value),w=ue(I(e.displayMonth),C);e.onChange(w)},j=(t=c==null?void 0:c.Dropdown)!==null&&t!==void 0?t:Je;return o.jsx(j,{name:"months","aria-label":d(),className:u.dropdown_month,style:s.dropdown_month,onChange:x,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:f.map(function(b){return o.jsx("option",{value:b.getMonth(),children:l(b,{locale:i})},b.getMonth())})})}function Ot(e){var t,a=e.displayMonth,n=D(),r=n.fromDate,s=n.toDate,i=n.locale,l=n.styles,u=n.classNames,c=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,m=[];if(!r)return o.jsx(o.Fragment,{});if(!s)return o.jsx(o.Fragment,{});for(var h=r.getFullYear(),x=s.getFullYear(),j=h;j<=x;j++)m.push(Ee(_a(new Date),j));var b=function(w){var R=Ee(I(a),Number(w.target.value));e.onChange(R)},C=(t=c==null?void 0:c.Dropdown)!==null&&t!==void 0?t:Je;return o.jsx(C,{name:"years","aria-label":f(),className:u.dropdown_year,style:l.dropdown_year,onChange:b,value:a.getFullYear(),caption:d(a,{locale:i}),children:m.map(function(w){return o.jsx("option",{value:w.getFullYear(),children:d(w,{locale:i})},w.getFullYear())})})}function It(e,t){var a=_.useState(e),n=a[0],r=a[1],s=t===void 0?n:t;return[s,r]}function Tt(e){var t=e.month,a=e.defaultMonth,n=e.today,r=t||a||n||new Date,s=e.toDate,i=e.fromDate,l=e.numberOfMonths,u=l===void 0?1:l;if(s&&X(s,r)<0){var c=-1*(u-1);r=E(s,c)}return i&&X(r,i)<0&&(r=i),I(r)}function Ft(){var e=D(),t=Tt(e),a=It(t,e.month),n=a[0],r=a[1],s=function(i){var l;if(!e.disableNavigation){var u=I(i);r(u),(l=e.onMonthChange)===null||l===void 0||l.call(e,u)}};return[n,s]}function Lt(e,t){for(var a=t.reverseMonths,n=t.numberOfMonths,r=I(e),s=I(E(r,n)),i=X(s,r),l=[],u=0;u<i;u++){var c=E(r,u);l.push(c)}return a&&(l=l.reverse()),l}function Wt(e,t){if(!t.disableNavigation){var a=t.toDate,n=t.pagedNavigation,r=t.numberOfMonths,s=r===void 0?1:r,i=n?s:1,l=I(e);if(!a)return E(l,i);var u=X(a,e);if(!(u<s))return E(l,i)}}function Et(e,t){if(!t.disableNavigation){var a=t.fromDate,n=t.pagedNavigation,r=t.numberOfMonths,s=r===void 0?1:r,i=n?s:1,l=I(e);if(!a)return E(l,-i);var u=X(l,a);if(!(u<=0))return E(l,-i)}}var Qe=_.createContext(void 0);function At(e){var t=D(),a=Ft(),n=a[0],r=a[1],s=Lt(n,t),i=Wt(n,t),l=Et(n,t),u=function(f){return s.some(function(m){return je(f,m)})},c=function(f,m){u(f)||(m&&Ke(f,m)?r(E(f,1+t.numberOfMonths*-1)):r(f))},d={currentMonth:n,displayMonths:s,goToMonth:r,goToDate:c,previousMonth:l,nextMonth:i,isDateDisplayed:u};return o.jsx(Qe.Provider,{value:d,children:e.children})}function ee(){var e=_.useContext(Qe);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Ae(e){var t,a=D(),n=a.classNames,r=a.styles,s=a.components,i=ee().goToMonth,l=function(d){i(E(d,e.displayIndex?-e.displayIndex:0))},u=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:Xe,c=o.jsx(u,{id:e.id,displayMonth:e.displayMonth});return o.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[o.jsx("div",{className:n.vhidden,children:c}),o.jsx(Pt,{onChange:l,displayMonth:e.displayMonth}),o.jsx(Ot,{onChange:l,displayMonth:e.displayMonth})]})}function Rt(e){return o.jsx("svg",p({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:o.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Bt(e){return o.jsx("svg",p({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:o.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var re=_.forwardRef(function(e,t){var a=D(),n=a.classNames,r=a.styles,s=[n.button_reset,n.button];e.className&&s.push(e.className);var i=s.join(" "),l=p(p({},r.button_reset),r.button);return e.style&&Object.assign(l,e.style),o.jsx("button",p({},e,{ref:t,type:"button",className:i,style:l}))});function Yt(e){var t,a,n=D(),r=n.dir,s=n.locale,i=n.classNames,l=n.styles,u=n.labels,c=u.labelPrevious,d=u.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return o.jsx(o.Fragment,{});var m=c(e.previousMonth,{locale:s}),h=[i.nav_button,i.nav_button_previous].join(" "),x=d(e.nextMonth,{locale:s}),j=[i.nav_button,i.nav_button_next].join(" "),b=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:Bt,C=(a=f==null?void 0:f.IconLeft)!==null&&a!==void 0?a:Rt;return o.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&o.jsx(re,{name:"previous-month","aria-label":m,className:h,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:r==="rtl"?o.jsx(b,{className:i.nav_icon,style:l.nav_icon}):o.jsx(C,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&o.jsx(re,{name:"next-month","aria-label":x,className:j,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:r==="rtl"?o.jsx(C,{className:i.nav_icon,style:l.nav_icon}):o.jsx(b,{className:i.nav_icon,style:l.nav_icon})})]})}function Re(e){var t=D().numberOfMonths,a=ee(),n=a.previousMonth,r=a.nextMonth,s=a.goToMonth,i=a.displayMonths,l=i.findIndex(function(x){return je(e.displayMonth,x)}),u=l===0,c=l===i.length-1,d=t>1&&(u||!c),f=t>1&&(c||!u),m=function(){n&&s(n)},h=function(){r&&s(r)};return o.jsx(Yt,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:r,previousMonth:n,onPreviousClick:m,onNextClick:h})}function qt(e){var t,a=D(),n=a.classNames,r=a.disableNavigation,s=a.styles,i=a.captionLayout,l=a.components,u=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:Xe,c;return r?c=o.jsx(u,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?c=o.jsx(Ae,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?c=o.jsxs(o.Fragment,{children:[o.jsx(Ae,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),o.jsx(Re,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):c=o.jsxs(o.Fragment,{children:[o.jsx(u,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),o.jsx(Re,{displayMonth:e.displayMonth,id:e.id})]}),o.jsx("div",{className:n.caption,style:s.caption,children:c})}function Ht(e){var t=D(),a=t.footer,n=t.styles,r=t.classNames.tfoot;return a?o.jsx("tfoot",{className:r,style:n.tfoot,children:o.jsx("tr",{children:o.jsx("td",{colSpan:8,children:a})})}):o.jsx(o.Fragment,{})}function zt(e,t,a){for(var n=a?be(new Date):Z(new Date,{locale:e,weekStartsOn:t}),r=[],s=0;s<7;s++){var i=T(n,s);r.push(i)}return r}function Ut(){var e=D(),t=e.classNames,a=e.styles,n=e.showWeekNumber,r=e.locale,s=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,u=e.labels.labelWeekday,c=zt(r,s,i);return o.jsxs("tr",{style:a.head_row,className:t.head_row,children:[n&&o.jsx("td",{style:a.head_cell,className:t.head_cell}),c.map(function(d,f){return o.jsx("th",{scope:"col",className:t.head_cell,style:a.head_cell,"aria-label":u(d,{locale:r}),children:l(d,{locale:r})},f)})]})}function $t(){var e,t=D(),a=t.classNames,n=t.styles,r=t.components,s=(e=r==null?void 0:r.HeadRow)!==null&&e!==void 0?e:Ut;return o.jsx("thead",{style:n.head,className:a.head,children:o.jsx(s,{})})}function Vt(e){var t=D(),a=t.locale,n=t.formatters.formatDay;return o.jsx(o.Fragment,{children:n(e.date,{locale:a})})}var Ne=_.createContext(void 0);function Kt(e){if(!J(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return o.jsx(Ne.Provider,{value:t,children:e.children})}return o.jsx(Gt,{initialProps:e.initialProps,children:e.children})}function Gt(e){var t=e.initialProps,a=e.children,n=t.selected,r=t.min,s=t.max,i=function(c,d,f){var m,h;(m=t.onDayClick)===null||m===void 0||m.call(t,c,d,f);var x=!!(d.selected&&r&&(n==null?void 0:n.length)===r);if(!x){var j=!!(!d.selected&&s&&(n==null?void 0:n.length)===s);if(!j){var b=n?Ge([],n):[];if(d.selected){var C=b.findIndex(function(w){return O(c,w)});b.splice(C,1)}else b.push(c);(h=t.onSelect)===null||h===void 0||h.call(t,b,c,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(c){var d=s&&n.length>s-1,f=n.some(function(m){return O(m,c)});return!!(d&&!f)});var u={selected:n,onDayClick:i,modifiers:l};return o.jsx(Ne.Provider,{value:u,children:a})}function we(){var e=_.useContext(Ne);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Zt(e,t){var a=t||{},n=a.from,r=a.to;return n&&r?O(r,e)&&O(n,e)?void 0:O(r,e)?{from:r,to:void 0}:O(n,e)?void 0:xe(n,e)?{from:e,to:r}:{from:n,to:e}:r?xe(e,r)?{from:r,to:e}:{from:e,to:r}:n?Ke(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var De=_.createContext(void 0);function Xt(e){if(!Q(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return o.jsx(De.Provider,{value:t,children:e.children})}return o.jsx(Jt,{initialProps:e.initialProps,children:e.children})}function Jt(e){var t=e.initialProps,a=e.children,n=t.selected,r=n||{},s=r.from,i=r.to,l=t.min,u=t.max,c=function(h,x,j){var b,C;(b=t.onDayClick)===null||b===void 0||b.call(t,h,x,j);var w=Zt(h,n);(C=t.onSelect)===null||C===void 0||C.call(t,w,h,x,j)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],i?(d.range_end=[i],O(s,i)||(d.range_middle=[{after:s,before:i}])):d.range_end=[s]):i&&(d.range_start=[i],d.range_end=[i]),l&&(s&&!i&&d.disabled.push({after:de(s,l-1),before:T(s,l-1)}),s&&i&&d.disabled.push({after:s,before:T(s,l-1)}),!s&&i&&d.disabled.push({after:de(i,l-1),before:T(i,l-1)})),u){if(s&&!i&&(d.disabled.push({before:T(s,-u+1)}),d.disabled.push({after:T(s,u-1)})),s&&i){var f=Y(i,s)+1,m=u-f;d.disabled.push({before:de(s,m)}),d.disabled.push({after:T(i,m)})}!s&&i&&(d.disabled.push({before:T(i,-u+1)}),d.disabled.push({after:T(i,u-1)}))}return o.jsx(De.Provider,{value:{selected:n,onDayClick:c,modifiers:d},children:a})}function Ce(){var e=_.useContext(De);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function ne(e){return Array.isArray(e)?Ge([],e):e!==void 0?[e]:[]}function Qt(e){var t={};return Object.entries(e).forEach(function(a){var n=a[0],r=a[1];t[n]=ne(r)}),t}var A;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(A||(A={}));var en=A.Selected,B=A.Disabled,an=A.Hidden,tn=A.Today,fe=A.RangeEnd,ve=A.RangeMiddle,me=A.RangeStart,nn=A.Outside;function rn(e,t,a){var n,r=(n={},n[en]=ne(e.selected),n[B]=ne(e.disabled),n[an]=ne(e.hidden),n[tn]=[e.today],n[fe]=[],n[ve]=[],n[me]=[],n[nn]=[],n);return e.fromDate&&r[B].push({before:e.fromDate}),e.toDate&&r[B].push({after:e.toDate}),J(e)?r[B]=r[B].concat(t.modifiers[B]):Q(e)&&(r[B]=r[B].concat(a.modifiers[B]),r[me]=a.modifiers[me],r[ve]=a.modifiers[ve],r[fe]=a.modifiers[fe]),r}var ea=_.createContext(void 0);function on(e){var t=D(),a=we(),n=Ce(),r=rn(t,a,n),s=Qt(t.modifiers),i=p(p({},r),s);return o.jsx(ea.Provider,{value:i,children:e.children})}function aa(){var e=_.useContext(ea);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function sn(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function ln(e){return!!(e&&typeof e=="object"&&"from"in e)}function dn(e){return!!(e&&typeof e=="object"&&"after"in e)}function cn(e){return!!(e&&typeof e=="object"&&"before"in e)}function un(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function fn(e,t){var a,n=t.from,r=t.to;if(n&&r){var s=Y(r,n)<0;s&&(a=[r,n],n=a[0],r=a[1]);var i=Y(e,n)>=0&&Y(r,e)>=0;return i}return r?O(r,e):n?O(n,e):!1}function vn(e){return He(e)}function mn(e){return Array.isArray(e)&&e.every(He)}function hn(e,t){return t.some(function(a){if(typeof a=="boolean")return a;if(vn(a))return O(e,a);if(mn(a))return a.includes(e);if(ln(a))return fn(e,a);if(un(a))return a.dayOfWeek.includes(e.getDay());if(sn(a)){var n=Y(a.before,e),r=Y(a.after,e),s=n>0,i=r<0,l=xe(a.before,a.after);return l?i&&s:s||i}return dn(a)?Y(e,a.after)>0:cn(a)?Y(a.before,e)>0:typeof a=="function"?a(e):!1})}function ke(e,t,a){var n=Object.keys(t).reduce(function(s,i){var l=t[i];return hn(e,l)&&s.push(i),s},[]),r={};return n.forEach(function(s){return r[s]=!0}),a&&!je(e,a)&&(r.outside=!0),r}function yn(e,t){for(var a=I(e[0]),n=ge(e[e.length-1]),r,s,i=a;i<=n;){var l=ke(i,t),u=!l.disabled&&!l.hidden;if(!u){i=T(i,1);continue}if(l.selected)return i;l.today&&!s&&(s=i),r||(r=i),i=T(i,1)}return s||r}var xn=365;function ta(e,t){var a=t.moveBy,n=t.direction,r=t.context,s=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,u=r.weekStartsOn,c=r.fromDate,d=r.toDate,f=r.locale,m={day:T,week:ye,month:E,year:et,startOfWeek:function(b){return r.ISOWeek?be(b):Z(b,{locale:f,weekStartsOn:u})},endOfWeek:function(b){return r.ISOWeek?Ve(b):_e(b,{locale:f,weekStartsOn:u})}},h=m[a](e,n==="after"?1:-1);n==="before"&&c?h=at([c,h]):n==="after"&&d&&(h=tt([d,h]));var x=!0;if(s){var j=ke(h,s);x=!j.disabled&&!j.hidden}return x?h:l.count>xn?l.lastFocused:ta(h,{moveBy:a,direction:n,context:r,modifiers:s,retry:p(p({},l),{count:l.count+1})})}var na=_.createContext(void 0);function pn(e){var t=ee(),a=aa(),n=_.useState(),r=n[0],s=n[1],i=_.useState(),l=i[0],u=i[1],c=yn(t.displayMonths,a),d=r??(l&&t.isDateDisplayed(l))?l:c,f=function(){u(r),s(void 0)},m=function(b){s(b)},h=D(),x=function(b,C){if(r){var w=ta(r,{moveBy:b,direction:C,context:h,modifiers:a});O(r,w)||(t.goToDate(w,r),m(w))}},j={focusedDay:r,focusTarget:d,blur:f,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return o.jsx(na.Provider,{value:j,children:e.children})}function Me(){var e=_.useContext(na);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function bn(e,t){var a=aa(),n=ke(e,a,t);return n}var Se=_.createContext(void 0);function gn(e){if(!oe(e.initialProps)){var t={selected:void 0};return o.jsx(Se.Provider,{value:t,children:e.children})}return o.jsx(_n,{initialProps:e.initialProps,children:e.children})}function _n(e){var t=e.initialProps,a=e.children,n=function(s,i,l){var u,c,d;if((u=t.onDayClick)===null||u===void 0||u.call(t,s,i,l),i.selected&&!t.required){(c=t.onSelect)===null||c===void 0||c.call(t,void 0,s,i,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,s,s,i,l)},r={selected:t.selected,onDayClick:n};return o.jsx(Se.Provider,{value:r,children:a})}function ra(){var e=_.useContext(Se);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function jn(e,t){var a=D(),n=ra(),r=we(),s=Ce(),i=Me(),l=i.focusDayAfter,u=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,f=i.blur,m=i.focus,h=i.focusMonthBefore,x=i.focusMonthAfter,j=i.focusYearBefore,b=i.focusYearAfter,C=i.focusStartOfWeek,w=i.focusEndOfWeek,R=function(g){var y,se,ie,le;oe(a)?(y=n.onDayClick)===null||y===void 0||y.call(n,e,t,g):J(a)?(se=r.onDayClick)===null||se===void 0||se.call(r,e,t,g):Q(a)?(ie=s.onDayClick)===null||ie===void 0||ie.call(s,e,t,g):(le=a.onDayClick)===null||le===void 0||le.call(a,e,t,g)},q=function(g){var y;m(e),(y=a.onDayFocus)===null||y===void 0||y.call(a,e,t,g)},H=function(g){var y;f(),(y=a.onDayBlur)===null||y===void 0||y.call(a,e,t,g)},v=function(g){var y;(y=a.onDayMouseEnter)===null||y===void 0||y.call(a,e,t,g)},N=function(g){var y;(y=a.onDayMouseLeave)===null||y===void 0||y.call(a,e,t,g)},k=function(g){var y;(y=a.onDayPointerEnter)===null||y===void 0||y.call(a,e,t,g)},P=function(g){var y;(y=a.onDayPointerLeave)===null||y===void 0||y.call(a,e,t,g)},ia=function(g){var y;(y=a.onDayTouchCancel)===null||y===void 0||y.call(a,e,t,g)},la=function(g){var y;(y=a.onDayTouchEnd)===null||y===void 0||y.call(a,e,t,g)},da=function(g){var y;(y=a.onDayTouchMove)===null||y===void 0||y.call(a,e,t,g)},ca=function(g){var y;(y=a.onDayTouchStart)===null||y===void 0||y.call(a,e,t,g)},ua=function(g){var y;(y=a.onDayKeyUp)===null||y===void 0||y.call(a,e,t,g)},fa=function(g){var y;switch(g.key){case"ArrowLeft":g.preventDefault(),g.stopPropagation(),a.dir==="rtl"?l():u();break;case"ArrowRight":g.preventDefault(),g.stopPropagation(),a.dir==="rtl"?u():l();break;case"ArrowDown":g.preventDefault(),g.stopPropagation(),c();break;case"ArrowUp":g.preventDefault(),g.stopPropagation(),d();break;case"PageUp":g.preventDefault(),g.stopPropagation(),g.shiftKey?j():h();break;case"PageDown":g.preventDefault(),g.stopPropagation(),g.shiftKey?b():x();break;case"Home":g.preventDefault(),g.stopPropagation(),C();break;case"End":g.preventDefault(),g.stopPropagation(),w();break}(y=a.onDayKeyDown)===null||y===void 0||y.call(a,e,t,g)},va={onClick:R,onFocus:q,onBlur:H,onKeyDown:fa,onKeyUp:ua,onMouseEnter:v,onMouseLeave:N,onPointerEnter:k,onPointerLeave:P,onTouchCancel:ia,onTouchEnd:la,onTouchMove:da,onTouchStart:ca};return va}function Nn(){var e=D(),t=ra(),a=we(),n=Ce(),r=oe(e)?t.selected:J(e)?a.selected:Q(e)?n.selected:void 0;return r}function wn(e){return Object.values(A).includes(e)}function Dn(e,t){var a=[e.classNames.day];return Object.keys(t).forEach(function(n){var r=e.modifiersClassNames[n];if(r)a.push(r);else if(wn(n)){var s=e.classNames["day_".concat(n)];s&&a.push(s)}}),a}function Cn(e,t){var a=p({},e.styles.day);return Object.keys(t).forEach(function(n){var r;a=p(p({},a),(r=e.modifiersStyles)===null||r===void 0?void 0:r[n])}),a}function kn(e,t,a){var n,r,s,i=D(),l=Me(),u=bn(e,t),c=jn(e,u),d=Nn(),f=!!(i.onDayClick||i.mode!=="default");_.useEffect(function(){var v;u.outside||l.focusedDay&&f&&O(l.focusedDay,e)&&((v=a.current)===null||v===void 0||v.focus())},[l.focusedDay,e,a,f,u.outside]);var m=Dn(i,u).join(" "),h=Cn(i,u),x=!!(u.outside&&!i.showOutsideDays||u.hidden),j=(s=(r=i.components)===null||r===void 0?void 0:r.DayContent)!==null&&s!==void 0?s:Vt,b=o.jsx(j,{date:e,displayMonth:t,activeModifiers:u}),C={style:h,className:m,children:b,role:"gridcell"},w=l.focusTarget&&O(l.focusTarget,e)&&!u.outside,R=l.focusedDay&&O(l.focusedDay,e),q=p(p(p({},C),(n={disabled:u.disabled,role:"gridcell"},n["aria-selected"]=u.selected,n.tabIndex=R||w?0:-1,n)),c),H={isButton:f,isHidden:x,activeModifiers:u,selectedDays:d,buttonProps:q,divProps:C};return H}function Mn(e){var t=_.useRef(null),a=kn(e.date,e.displayMonth,t);return a.isHidden?o.jsx("div",{role:"gridcell"}):a.isButton?o.jsx(re,p({name:"day",ref:t},a.buttonProps)):o.jsx("div",p({},a.divProps))}function Sn(e){var t=e.number,a=e.dates,n=D(),r=n.onWeekNumberClick,s=n.styles,i=n.classNames,l=n.locale,u=n.labels.labelWeekNumber,c=n.formatters.formatWeekNumber,d=c(Number(t),{locale:l});if(!r)return o.jsx("span",{className:i.weeknumber,style:s.weeknumber,children:d});var f=u(Number(t),{locale:l}),m=function(h){r(t,a,h)};return o.jsx(re,{name:"week-number","aria-label":f,className:i.weeknumber,style:s.weeknumber,onClick:m,children:d})}function Pn(e){var t,a,n=D(),r=n.styles,s=n.classNames,i=n.showWeekNumber,l=n.components,u=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:Mn,c=(a=l==null?void 0:l.WeekNumber)!==null&&a!==void 0?a:Sn,d;return i&&(d=o.jsx("td",{className:s.cell,style:r.cell,children:o.jsx(c,{number:e.weekNumber,dates:e.dates})})),o.jsxs("tr",{className:s.row,style:r.row,children:[d,e.dates.map(function(f){return o.jsx("td",{className:s.cell,style:r.cell,role:"presentation",children:o.jsx(u,{displayMonth:e.displayMonth,date:f})},ot(f))})]})}function Be(e,t,a){for(var n=a!=null&&a.ISOWeek?Ve(t):_e(t,a),r=a!=null&&a.ISOWeek?be(e):Z(e,a),s=Y(n,r),i=[],l=0;l<=s;l++)i.push(T(r,l));var u=i.reduce(function(c,d){var f=a!=null&&a.ISOWeek?ja(d):Na(d,a),m=c.find(function(h){return h.weekNumber===f});return m?(m.dates.push(d),c):(c.push({weekNumber:f,dates:[d]}),c)},[]);return u}function On(e,t){var a=Be(I(e),ge(e),t);if(t!=null&&t.useFixedWeeks){var n=it(e,t);if(n<6){var r=a[a.length-1],s=r.dates[r.dates.length-1],i=ye(s,6-n),l=Be(ye(s,1),i,t);a.push.apply(a,l)}}return a}function In(e){var t,a,n,r=D(),s=r.locale,i=r.classNames,l=r.styles,u=r.hideHead,c=r.fixedWeeks,d=r.components,f=r.weekStartsOn,m=r.firstWeekContainsDate,h=r.ISOWeek,x=On(e.displayMonth,{useFixedWeeks:!!c,ISOWeek:h,locale:s,weekStartsOn:f,firstWeekContainsDate:m}),j=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:$t,b=(a=d==null?void 0:d.Row)!==null&&a!==void 0?a:Pn,C=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:Ht;return o.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!u&&o.jsx(j,{}),o.jsx("tbody",{className:i.tbody,style:l.tbody,children:x.map(function(w){return o.jsx(b,{displayMonth:e.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),o.jsx(C,{displayMonth:e.displayMonth})]})}function Tn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Fn=Tn()?_.useLayoutEffect:_.useEffect,he=!1,Ln=0;function Ye(){return"react-day-picker-".concat(++Ln)}function Wn(e){var t,a=e??(he?Ye():null),n=_.useState(a),r=n[0],s=n[1];return Fn(function(){r===null&&s(Ye())},[]),_.useEffect(function(){he===!1&&(he=!0)},[]),(t=e??r)!==null&&t!==void 0?t:void 0}function En(e){var t,a,n=D(),r=n.dir,s=n.classNames,i=n.styles,l=n.components,u=ee().displayMonths,c=Wn(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[s.month],m=i.month,h=e.displayIndex===0,x=e.displayIndex===u.length-1,j=!h&&!x;r==="rtl"&&(t=[h,x],x=t[0],h=t[1]),h&&(f.push(s.caption_start),m=p(p({},m),i.caption_start)),x&&(f.push(s.caption_end),m=p(p({},m),i.caption_end)),j&&(f.push(s.caption_between),m=p(p({},m),i.caption_between));var b=(a=l==null?void 0:l.Caption)!==null&&a!==void 0?a:qt;return o.jsxs("div",{className:f.join(" "),style:m,children:[o.jsx(b,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),o.jsx(In,{id:d,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function An(e){var t=D(),a=t.classNames,n=t.styles;return o.jsx("div",{className:a.months,style:n.months,children:e.children})}function Rn(e){var t,a,n=e.initialProps,r=D(),s=Me(),i=ee(),l=_.useState(!1),u=l[0],c=l[1];_.useEffect(function(){r.initialFocus&&s.focusTarget&&(u||(s.focus(s.focusTarget),c(!0)))},[r.initialFocus,u,s.focus,s.focusTarget,s]);var d=[r.classNames.root,r.className];r.numberOfMonths>1&&d.push(r.classNames.multiple_months),r.showWeekNumber&&d.push(r.classNames.with_weeknumber);var f=p(p({},r.styles.root),r.style),m=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,j){var b;return p(p({},x),(b={},b[j]=n[j],b))},{}),h=(a=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&a!==void 0?a:An;return o.jsx("div",p({className:d.join(" "),style:f,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:o.jsx(h,{children:i.displayMonths.map(function(x,j){return o.jsx(En,{displayIndex:j,displayMonth:x},j)})})}))}function Bn(e){var t=e.children,a=dt(e,["children"]);return o.jsx(Mt,{initialProps:a,children:o.jsx(At,{children:o.jsx(gn,{initialProps:a,children:o.jsx(Kt,{initialProps:a,children:o.jsx(Xt,{initialProps:a,children:o.jsx(on,{children:o.jsx(pn,{children:t})})})})})})})}function Yn(e){return o.jsx(Bn,p({},e,{children:o.jsx(Rn,{initialProps:e})}))}function oa({className:e,classNames:t,showOutsideDays:a=!0,...n}){return o.jsx(Yn,{showOutsideDays:a,className:U("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:U(Ie({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:U(Ie({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...r})=>o.jsx($a,{className:"h-4 w-4"}),IconRight:({...r})=>o.jsx(wa,{className:"h-4 w-4"})},...n})}oa.displayName="Calendar";const qn=ma,Hn=ha,sa=_.forwardRef(({className:e,align:t="center",sideOffset:a=4,...n},r)=>o.jsx(ya,{children:o.jsx(qe,{ref:r,align:t,sideOffset:a,className:U("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));sa.displayName=qe.displayName;const zn=({item:e,open:t,onClose:a,onSave:n})=>{const[r,s]=_.useState({name:"",brand:"",category:"fridge",quantity:0,unit:"",expiryDate:null,autoOrder:!1,threshold:20}),[i,l]=_.useState(!1);_.useEffect(()=>{e&&t&&s({name:e.name,brand:e.brand_name||"",category:e.category,quantity:e.quantity||0,unit:e.unit||"",expiryDate:e.expiry_date?new Date(e.expiry_date):null,autoOrder:e.auto_order_enabled,threshold:e.reorder_threshold||20})},[e,t]);const u=async()=>{if(!r.name.trim()){S.error("Item name is required");return}if(r.quantity<0){S.error("Quantity cannot be negative");return}l(!0);const{error:c}=await M.from("inventory").update({name:r.name.trim(),brand_name:r.brand.trim()||null,category:r.category,quantity:r.quantity,unit:r.unit||null,expiry_date:r.expiryDate?r.expiryDate.toISOString().split("T")[0]:null,auto_order_enabled:r.autoOrder,reorder_threshold:r.threshold,updated_at:new Date().toISOString()}).eq("id",e.id);l(!1),c?S.error("Failed to update item"):(S.success("Item updated successfully"),n(),a())};return o.jsx(Da,{open:t,onOpenChange:a,children:o.jsxs(Ca,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[o.jsx(ka,{children:o.jsx(Ma,{children:"Edit Item Details"})}),o.jsxs("div",{className:"space-y-6 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(z,{htmlFor:"name",children:"Item Name *"}),o.jsx(ce,{id:"name",value:r.name,onChange:c=>s(d=>({...d,name:c.target.value})),placeholder:"Enter item name"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(z,{htmlFor:"brand",children:"Brand"}),o.jsx(ce,{id:"brand",value:r.brand,onChange:c=>s(d=>({...d,brand:c.target.value})),placeholder:"Enter brand name"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(z,{htmlFor:"category",children:"Category *"}),o.jsxs(Te,{value:r.category,onValueChange:c=>s(d=>({...d,category:c})),children:[o.jsx(Fe,{id:"category",children:o.jsx(Le,{placeholder:"Select category"})}),o.jsxs(We,{children:[o.jsx(L,{value:"fridge",children:"Fridge"}),o.jsx(L,{value:"pantry",children:"Pantry"}),o.jsx(L,{value:"beauty",children:"Beauty"}),o.jsx(L,{value:"pets",children:"Pets"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(z,{htmlFor:"quantity",children:"Quantity"}),o.jsx(ce,{id:"quantity",type:"number",min:"0",step:"0.1",value:r.quantity,onChange:c=>s(d=>({...d,quantity:parseFloat(c.target.value)||0}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(z,{htmlFor:"unit",children:"Unit"}),o.jsxs(Te,{value:r.unit,onValueChange:c=>s(d=>({...d,unit:c})),children:[o.jsx(Fe,{id:"unit",children:o.jsx(Le,{placeholder:"Select unit"})}),o.jsxs(We,{children:[o.jsx(L,{value:"oz",children:"oz"}),o.jsx(L,{value:"lb",children:"lb"}),o.jsx(L,{value:"g",children:"g"}),o.jsx(L,{value:"kg",children:"kg"}),o.jsx(L,{value:"ml",children:"ml"}),o.jsx(L,{value:"L",children:"L"}),o.jsx(L,{value:"count",children:"count"})]})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(z,{children:"Expiry Date"}),o.jsxs(qn,{children:[o.jsx(Hn,{asChild:!0,children:o.jsxs(W,{variant:"outline",className:U("w-full justify-start text-left font-normal",!r.expiryDate&&"text-muted-foreground"),children:[o.jsx(Va,{className:"mr-2 h-4 w-4"}),r.expiryDate?$(r.expiryDate,"PPP"):"Pick a date"]})}),o.jsx(sa,{className:"w-auto p-0",align:"start",children:o.jsx(oa,{mode:"single",selected:r.expiryDate||void 0,onSelect:c=>s(d=>({...d,expiryDate:c||null})),initialFocus:!0,className:"pointer-events-auto"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(z,{htmlFor:"auto-order",children:"Auto-Order"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically add to shopping list when low"})]}),o.jsx(Ua,{id:"auto-order",checked:r.autoOrder,onCheckedChange:c=>s(d=>({...d,autoOrder:c}))})]}),r.autoOrder&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx(z,{children:"Reorder Threshold"}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.threshold,"%"]})]}),o.jsx(Sa,{value:[r.threshold],onValueChange:c=>s(d=>({...d,threshold:c[0]})),min:0,max:100,step:5})]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:a,disabled:i,children:"Cancel"}),o.jsxs(W,{onClick:u,disabled:i,className:"gap-2",children:[o.jsx(Qa,{className:"w-4 h-4"}),i?"Saving...":"Save Changes"]})]})]})})},Un=({item:e,isSelectionMode:t,isSelected:a,onToggleSelection:n,onLongPress:r,onRefresh:s})=>{const[i,l]=_.useState(!1),[u,c]=_.useState(!1),[d,f]=_.useState(null),m=e.fill_level||50,h=e.quantity||0,x=e.expiry_date?Math.ceil((new Date(e.expiry_date).getTime()-Date.now())/(1e3*60*60*24)):null,j=v=>v<=20?"bg-destructive":v<=50?"bg-amber-500":"bg-emerald-500",b=_.useCallback(async v=>{if(v<0)return;c(!0);const N=e.quantity&&e.quantity>0?Math.round(v/e.quantity*100):50,{error:k}=await M.from("inventory").update({quantity:v,fill_level:N,updated_at:new Date().toISOString()}).eq("id",e.id);c(!1),k&&S.error("Failed to update quantity")},[e.id,e.quantity]),C=async()=>{const{data:{user:v}}=await M.auth.getUser();if(!v)return;const{data:N}=await M.from("profiles").select("current_household_id").eq("id",v.id).single();if(!(N!=null&&N.current_household_id)){S.error("No household found");return}const{error:k}=await M.from("shopping_list").insert({item_name:e.name,household_id:N.current_household_id,source:"manual",priority:"normal",quantity:1,unit:e.unit,inventory_id:e.id});k?S.error("Failed to move item"):(await M.from("inventory").update({status:"out_of_stock",fill_level:0}).eq("id",e.id),S.success(`${e.name} moved to shopping list`))},w=async()=>{const{error:v}=await M.from("inventory").update({status:"likely_spoiled",fill_level:0,updated_at:new Date().toISOString()}).eq("id",e.id);v?S.error("Failed to mark as spoiled"):S.warning("Item marked as spoiled")},R=async()=>{if(!confirm(`Delete ${e.name}?`))return;const{error:v}=await M.from("inventory").delete().eq("id",e.id);v?S.error("Failed to delete item"):S.success("Item deleted")},q=()=>{const v=setTimeout(()=>{r()},500);f(v)},H=()=>{d&&(clearTimeout(d),f(null))};return o.jsxs(o.Fragment,{children:[o.jsxs(G.div,{variants:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}},onMouseDown:q,onMouseUp:H,onTouchStart:q,onTouchEnd:H,className:U("relative bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-4 hover:bg-card/70 transition-all cursor-pointer",a&&"ring-2 ring-primary"),onClick:()=>t&&n(),children:[t&&o.jsx("div",{className:"absolute top-3 right-3 z-10",children:o.jsx(za,{checked:a,onCheckedChange:n})}),o.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.product_image_url?o.jsx("img",{src:e.product_image_url,alt:e.name,className:"w-full h-full object-cover rounded-lg"}):o.jsx(ze,{className:"w-6 h-6 text-primary"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-foreground truncate",children:e.name}),e.brand_name&&o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.brand_name})]}),!t&&o.jsxs(Pa,{children:[o.jsx(Oa,{asChild:!0,children:o.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:o.jsx(Ia,{className:"w-4 h-4"})})}),o.jsxs(Ta,{align:"end",className:"w-56",children:[o.jsxs(ae,{onClick:C,children:[o.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Move to Shopping List"]}),o.jsxs(ae,{onClick:()=>l(!0),children:[o.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Edit Details"]}),o.jsxs(ae,{onClick:w,children:[o.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Mark as Spoiled"]}),o.jsx(La,{}),o.jsxs(ae,{onClick:R,className:"text-destructive",children:[o.jsx($e,{className:"w-4 h-4 mr-2"}),"Delete Item"]})]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[x!==null&&x<=3&&x>=0&&o.jsxs(te,{variant:"outline",className:"bg-amber-500/10 text-amber-600 border-amber-500/20",children:["Expires in ",x,"d"]}),e.auto_order_enabled&&o.jsxs(te,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:[o.jsx(Wa,{className:"w-3 h-3 mr-1"}),"Auto-order"]}),e.nutrition_data&&(e.nutrition_data.calories||e.nutrition_data.protein)&&o.jsxs(te,{variant:"outline",className:"bg-accent/10 text-accent border-accent/20",children:[e.nutrition_data.calories&&`${e.nutrition_data.calories} cal`,e.nutrition_data.calories&&e.nutrition_data.protein&&" | ",e.nutrition_data.protein&&`${e.nutrition_data.protein}g protein`]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[o.jsx("span",{children:"Fill Level"}),o.jsxs("span",{children:[m,"%"]})]}),o.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:o.jsx(G.div,{initial:{width:0},animate:{width:`${m}%`},className:U("h-full rounded-full transition-all duration-300",j(m),m<=20&&"animate-pulse")})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg px-2 py-1",children:[o.jsx(W,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:v=>{v.stopPropagation(),b(h-1)},disabled:u||h<=0,children:o.jsx(Ea,{className:"w-3 h-3"})}),o.jsx("span",{className:"text-sm font-medium min-w-[60px] text-center",children:u?"...":`${h} ${e.unit||""}`}),o.jsx(W,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:v=>{v.stopPropagation(),b(h+1)},disabled:u,children:o.jsx(Aa,{className:"w-3 h-3"})})]}),o.jsx(te,{variant:"outline",className:U("capitalize",e.status==="likely_spoiled"&&"bg-destructive/10 text-destructive border-destructive/20",e.status==="low"&&"bg-amber-500/10 text-amber-600 border-amber-500/20"),children:e.status||"sufficient"})]})]}),o.jsx(zn,{item:e,open:i,onClose:()=>l(!1),onSave:s})]})},xr=()=>{const e=xa(),[t,a]=_.useState("all"),[n,r]=_.useState([]),[s,i]=_.useState(!0),[l,u]=_.useState([]),[c,d]=_.useState(!1),[f,m]=_.useState(null),h=Za();_.useEffect(()=>{j(),x()},[]),_.useEffect(()=>{if(!f)return;const v=M.channel("inventory-changes").on("postgres_changes",{event:"*",schema:"public",table:"inventory",filter:`user_id=eq.${f}`},N=>{N.eventType==="INSERT"?r(k=>[...k,N.new]):N.eventType==="UPDATE"?r(k=>k.map(P=>P.id===N.new.id?N.new:P)):N.eventType==="DELETE"&&r(k=>k.filter(P=>P.id!==N.old.id))}).subscribe();return()=>{M.removeChannel(v)}},[f]);const x=async()=>{const{data:{user:v}}=await M.auth.getUser();v&&m(v.id)},j=async()=>{i(!0);const{data:{user:v}}=await M.auth.getUser();if(!v)return;const{data:N}=await M.from("profiles").select("current_household_id").eq("id",v.id).single();if(!(N!=null&&N.current_household_id)){i(!1);return}const{data:k,error:P}=await M.from("inventory").select("*").eq("household_id",N.current_household_id).order("name");!P&&k&&r(k),i(!1)},b=n.filter(v=>t==="all"||v.category===t),C=v=>{u(N=>N.includes(v)?N.filter(k=>k!==v):[...N,v])},w=v=>{c||(d(!0),u([v]))},R=async()=>{const v=l.length;if(!confirm(`Delete ${v} item${v>1?"s":""}?`))return;const{error:N}=await M.from("inventory").delete().in("id",l);N?S.error("Failed to delete items"):(S.success(`${v} item${v>1?"s":""} deleted`),u([]),d(!1))},q=async()=>{if(!f)return;const{data:v}=await M.from("profiles").select("current_household_id").eq("id",f).single();if(!(v!=null&&v.current_household_id)){S.error("No household found");return}const N=n.filter(P=>l.includes(P.id)).map(P=>({item_name:P.name,household_id:v.current_household_id,source:"bulk_add",priority:"normal",quantity:1,unit:P.unit,inventory_id:P.id})),{error:k}=await M.from("shopping_list").insert(N);k?S.error("Failed to add items to shopping list"):(S.success(`${N.length} item${N.length>1?"s":""} added to shopping list`),u([]),d(!1))},H=()=>{d(!1),u([])};return o.jsx(Ba,{onScan:()=>e("/"),children:o.jsx(Xa,{swipeProgress:h.progress,swipeDirection:h.direction,children:o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl pb-16",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(W,{variant:"ghost",size:"icon",onClick:()=>e("/app"),className:"mr-2 rounded-full hover:bg-white/10",children:o.jsx(Ja,{className:"w-6 h-6"})}),o.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Inventory Manager"})]}),o.jsx("p",{className:"text-muted-foreground ml-14",children:"Manage all your household items"})]}),o.jsxs(Ya,{value:t,onValueChange:v=>a(v),className:"mb-6",children:[o.jsxs(qa,{className:"bg-card/50 backdrop-blur-sm border border-border/50",children:[o.jsx(K,{value:"all",children:"All Items"}),o.jsx(K,{value:"fridge",children:"Fridge"}),o.jsx(K,{value:"pantry",children:"Pantry"}),o.jsx(K,{value:"beauty",children:"Beauty"}),o.jsx(K,{value:"pets",children:"Pets"})]}),s?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[1,2,3,4,5,6].map(v=>o.jsx("div",{className:"h-48 bg-card/30 rounded-xl animate-pulse"},v))}):o.jsx(Ha,{value:t,className:"mt-6",children:b.length===0?o.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[o.jsx(ze,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),o.jsxs("p",{className:"text-lg text-muted-foreground mb-4",children:["No items in ",t==="all"?"your inventory":t]}),o.jsx(W,{onClick:()=>e("/"),variant:"default",children:"Scan Items"})]}):o.jsx(G.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",initial:"hidden",animate:"show",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},children:b.map(v=>o.jsx(Un,{item:v,isSelectionMode:c,isSelected:l.includes(v.id),onToggleSelection:()=>C(v.id),onLongPress:()=>w(v.id),onRefresh:j},v.id))})})]}),o.jsx(Ka,{children:c&&l.length>0&&o.jsx(G.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50",children:o.jsxs("div",{className:"bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl px-6 py-4 flex items-center gap-4",children:[o.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.length," selected"]}),o.jsx("div",{className:"h-6 w-px bg-border"}),o.jsxs(W,{variant:"destructive",size:"sm",onClick:R,className:"gap-2",children:[o.jsx($e,{className:"w-4 h-4"}),"Delete"]}),o.jsxs(W,{variant:"default",size:"sm",onClick:q,className:"gap-2",children:[o.jsx(Ue,{className:"w-4 h-4"}),"Add to Cart"]}),o.jsxs(W,{variant:"ghost",size:"sm",onClick:H,className:"gap-2",children:[o.jsx(Ra,{className:"w-4 h-4"}),"Cancel"]})]})})})]})})})};export{xr as default};
